#!/usr/bin/env bash

VERSION=1.5.1
URL=https://github.com/InkApplications/ink-ui/releases/download/${VERSION}/inkui-${VERSION}.zip
SHA256=515a4d3bc20893d0162ea0de5bb3001c103c8b14f4d73af875bd983ea245c6fe
INSTALL_DIR="$HOME/.local/share/inkui"
INKUI_BIN="$HOME/.local/share/inkui/${VERSION}/bin/inkui"

if [ ! -f "$INKUI_BIN" ]; then
    echo "Downloading inkui..."
    TEMP_FOLDER=$(mktemp -d)
    ZIP_FILE="${TEMP_FOLDER}/inkui.zip"
    curl -L "$URL" -o "$ZIP_FILE"
    echo "$SHA256 $ZIP_FILE" | sha256sum -c -
    if [ $? -ne 0 ]; then
        echo "Checksum verification failed!"
        exit 1
    fi
    mkdir -p "$INSTALL_DIR"
    unzip "$ZIP_FILE" -d "${INSTALL_DIR}"
    mv "${INSTALL_DIR}/inkui-${VERSION}" "${INSTALL_DIR}/${VERSION}"
fi

"$INKUI_BIN" $@
